<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 500" font-family="Inter, system-ui, sans-serif">
  <defs>
    <linearGradient id="bg2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f5f0ff"/>
      <stop offset="100%" style="stop-color:#ece4f8"/>
    </linearGradient>
    <filter id="shadow2" x="-4%" y="-4%" width="108%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#00000018"/>
    </filter>
    <marker id="arrPurp" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6" fill="#7b1fa2"/></marker>
    <marker id="arrTeal" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6" fill="#00695c"/></marker>
    <marker id="arrAmber" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6" fill="#e65100"/></marker>
    <marker id="arrBlue2" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6" fill="#1565c0"/></marker>
  </defs>

  <!-- Background -->
  <rect width="820" height="500" rx="12" fill="url(#bg2)"/>

  <!-- Title -->
  <text x="410" y="35" text-anchor="middle" font-size="16" font-weight="700" fill="#4a148c">AI Agents Workflow — System Architecture</text>

  <!-- ===== USER LAYER ===== -->
  <text x="60" y="68" font-size="11" font-weight="600" fill="#1565c0" letter-spacing="1.5">USER INTERFACE</text>

  <!-- Trader -->
  <rect x="30" y="80" width="120" height="60" rx="8" fill="#ffffff" stroke="#1565c0" stroke-width="1.5" filter="url(#shadow2)"/>
  <text x="90" y="105" text-anchor="middle" font-size="12" font-weight="600" fill="#1565c0">Trader</text>
  <text x="90" y="120" text-anchor="middle" font-size="10" fill="#5c6bc0">Natural Language</text>

  <!-- Arrow -->
  <line x1="150" y1="110" x2="198" y2="110" stroke="#1565c0" stroke-width="2" marker-end="url(#arrBlue2)"/>

  <!-- Chat Interface -->
  <rect x="200" y="80" width="180" height="60" rx="8" fill="#e3f2fd" stroke="#1565c0" stroke-width="1.5" filter="url(#shadow2)"/>
  <text x="290" y="100" text-anchor="middle" font-size="12" font-weight="600" fill="#1565c0">Chat Interface</text>
  <text x="290" y="116" text-anchor="middle" font-size="10" fill="#42a5f5">React + WebSocket</text>
  <text x="290" y="131" text-anchor="middle" font-size="9" fill="#90a4ae">Conversational / Multi-turn</text>

  <!-- Arrow -->
  <line x1="380" y1="110" x2="428" y2="110" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrPurp)"/>

  <!-- ===== ORCHESTRATOR ===== -->
  <rect x="430" y="72" width="200" height="76" rx="10" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" filter="url(#shadow2)"/>
  <text x="530" y="98" text-anchor="middle" font-size="13" font-weight="700" fill="#7b1fa2">Orchestrator Agent</text>
  <text x="530" y="115" text-anchor="middle" font-size="10" fill="#9c27b0">Intent Detection</text>
  <text x="530" y="130" text-anchor="middle" font-size="10" fill="#9c27b0">Context Management</text>
  <text x="530" y="142" text-anchor="middle" font-size="9" fill="#ba68c8">Routes A2A Messages</text>

  <!-- ===== A2A PROTOCOL BAR ===== -->
  <rect x="120" y="180" width="580" height="30" rx="15" fill="#ede7f6" stroke="#7b1fa2" stroke-width="1.5"/>
  <text x="410" y="200" text-anchor="middle" font-size="11" font-weight="700" fill="#7b1fa2" letter-spacing="2">A2A PROTOCOL — Agent-to-Agent Communication</text>

  <!-- Arrows from orchestrator to A2A bar -->
  <line x1="530" y1="148" x2="530" y2="178" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrPurp)"/>

  <!-- ===== AGENT LAYER ===== -->
  <text x="60" y="240" font-size="11" font-weight="600" fill="#7b1fa2" letter-spacing="1.5">SPECIALIZED AGENTS</text>

  <!-- Arrows from A2A to agents -->
  <line x1="200" y1="210" x2="200" y2="258" stroke="#7b1fa2" stroke-width="1.5" marker-end="url(#arrPurp)"/>
  <line x1="420" y1="210" x2="420" y2="258" stroke="#7b1fa2" stroke-width="1.5" marker-end="url(#arrPurp)"/>
  <line x1="640" y1="210" x2="640" y2="258" stroke="#7b1fa2" stroke-width="1.5" marker-end="url(#arrPurp)"/>

  <!-- Text2SQL Agent -->
  <rect x="110" y="260" width="180" height="80" rx="8" fill="#e0f2f1" stroke="#00695c" stroke-width="1.5" filter="url(#shadow2)"/>
  <text x="200" y="285" text-anchor="middle" font-size="12" font-weight="700" fill="#00695c">Text2SQL Agent</text>
  <text x="200" y="302" text-anchor="middle" font-size="10" fill="#00897b">NL → SQL Query</text>
  <text x="200" y="318" text-anchor="middle" font-size="9" fill="#4db6ac">Schema-Aware</text>
  <text x="200" y="332" text-anchor="middle" font-size="9" fill="#4db6ac">Safety Validation</text>

  <!-- Text2Dashboard Agent -->
  <rect x="330" y="260" width="180" height="80" rx="8" fill="#fff3e0" stroke="#e65100" stroke-width="1.5" filter="url(#shadow2)"/>
  <text x="420" y="285" text-anchor="middle" font-size="12" font-weight="700" fill="#e65100">Text2Dashboard</text>
  <text x="420" y="302" text-anchor="middle" font-size="10" fill="#ef6c00">Data → Charts</text>
  <text x="420" y="318" text-anchor="middle" font-size="9" fill="#ffb74d">Line, Bar, Heatmap</text>
  <text x="420" y="332" text-anchor="middle" font-size="9" fill="#ffb74d">Responsive Layout</text>

  <!-- Schema Agent -->
  <rect x="550" y="260" width="180" height="80" rx="8" fill="#fce4ec" stroke="#c62828" stroke-width="1.5" filter="url(#shadow2)"/>
  <text x="640" y="285" text-anchor="middle" font-size="12" font-weight="700" fill="#c62828">Schema Agent</text>
  <text x="640" y="302" text-anchor="middle" font-size="10" fill="#e53935">Business Glossary</text>
  <text x="640" y="318" text-anchor="middle" font-size="9" fill="#ef9a9a">Trading Terms →</text>
  <text x="640" y="332" text-anchor="middle" font-size="9" fill="#ef9a9a">Table Columns</text>

  <!-- ===== DATA LAYER ===== -->
  <text x="60" y="382" font-size="11" font-weight="600" fill="#e65100" letter-spacing="1.5">DATA &amp; OUTPUT</text>

  <!-- Arrow from Text2SQL to ClickHouse -->
  <line x1="200" y1="340" x2="200" y2="398" stroke="#00695c" stroke-width="2" marker-end="url(#arrTeal)"/>

  <!-- ClickHouse -->
  <rect x="110" y="400" width="180" height="70" rx="8" fill="#fff3e0" stroke="#e65100" stroke-width="1.5" filter="url(#shadow2)"/>
  <text x="200" y="425" text-anchor="middle" font-size="12" font-weight="700" fill="#e65100">ClickHouse</text>
  <text x="200" y="442" text-anchor="middle" font-size="10" fill="#bf360c">Trade &amp; Risk Data</text>
  <text x="200" y="458" text-anchor="middle" font-size="9" fill="#a1887f">SQL Query Execution</text>

  <!-- Arrow from ClickHouse to Dashboard Renderer -->
  <line x1="290" y1="435" x2="388" y2="435" stroke="#e65100" stroke-width="2" marker-end="url(#arrAmber)"/>
  <text x="340" y="428" text-anchor="middle" font-size="8" fill="#bf360c">query results</text>

  <!-- Arrow from Text2Dashboard to Dashboard Renderer -->
  <line x1="420" y1="340" x2="420" y2="398" stroke="#e65100" stroke-width="2" marker-end="url(#arrAmber)"/>

  <!-- Dashboard Renderer -->
  <rect x="390" y="400" width="200" height="70" rx="8" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2" filter="url(#shadow2)"/>
  <text x="490" y="425" text-anchor="middle" font-size="12" font-weight="700" fill="#2e7d32">Dashboard Renderer</text>
  <text x="490" y="442" text-anchor="middle" font-size="10" fill="#388e3c">React Charts</text>
  <text x="490" y="458" text-anchor="middle" font-size="9" fill="#66bb6a">Dynamic Layout from Config</text>

  <!-- Arrow from Dashboard back to Chat -->
  <path d="M590,435 L750,435 L750,110 L650,110" stroke="#1565c0" stroke-width="1.5" stroke-dasharray="6,3" fill="none" marker-end="url(#arrBlue2)"/>
  <text x="758" y="280" font-size="9" fill="#5c6bc0" transform="rotate(90,758,280)">updates display</text>

  <!-- LLM badge -->
  <rect x="670" y="395" width="120" height="70" rx="8" fill="#ffffff" stroke="#7b1fa2" stroke-width="1" filter="url(#shadow2)" opacity="0.95"/>
  <text x="730" y="418" text-anchor="middle" font-size="10" font-weight="600" fill="#7b1fa2">LLM Backend</text>
  <text x="730" y="434" text-anchor="middle" font-size="9" fill="#9c27b0">Claude / GPT-4</text>
  <text x="730" y="450" text-anchor="middle" font-size="9" fill="#ba68c8">Powers all agents</text>
</svg>
