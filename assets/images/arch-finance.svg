<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 520" font-family="Inter, system-ui, sans-serif">
  <defs>
    <linearGradient id="bg1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f0f4ff"/>
      <stop offset="100%" style="stop-color:#e8eef8"/>
    </linearGradient>
    <filter id="shadow1" x="-4%" y="-4%" width="108%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#00000018"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="820" height="520" rx="12" fill="url(#bg1)"/>

  <!-- Title -->
  <text x="410" y="35" text-anchor="middle" font-size="16" font-weight="700" fill="#1a3a5c">Trading &amp; Risk Management — System Architecture</text>

  <!-- ===== TRADING SYSTEM (top row) ===== -->
  <text x="60" y="68" font-size="11" font-weight="600" fill="#2e7d32" letter-spacing="1.5">TRADING SYSTEM</text>

  <!-- Order Entry -->
  <rect x="30" y="80" width="140" height="60" rx="8" fill="#ffffff" stroke="#4a90d9" stroke-width="1.5" filter="url(#shadow1)"/>
  <text x="100" y="105" text-anchor="middle" font-size="12" font-weight="600" fill="#1a3a5c">Order Entry</text>
  <text x="100" y="122" text-anchor="middle" font-size="10" fill="#7a8a9a">Client / API</text>

  <!-- Arrow 1 -->
  <line x1="170" y1="110" x2="218" y2="110" stroke="#4a90d9" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <defs><marker id="arrowBlue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6" fill="#4a90d9"/></marker></defs>

  <!-- Order Book -->
  <rect x="220" y="80" width="150" height="60" rx="8" fill="#e3f2fd" stroke="#4a90d9" stroke-width="1.5" filter="url(#shadow1)"/>
  <text x="295" y="105" text-anchor="middle" font-size="12" font-weight="600" fill="#1565c0">Order Book</text>
  <text x="295" y="122" text-anchor="middle" font-size="10" fill="#42a5f5">Price-Time Matching</text>

  <!-- Arrow 2 -->
  <line x1="370" y1="110" x2="418" y2="110" stroke="#4a90d9" stroke-width="2" marker-end="url(#arrowBlue)"/>

  <!-- Trade Execution -->
  <rect x="420" y="80" width="150" height="60" rx="8" fill="#e3f2fd" stroke="#4a90d9" stroke-width="1.5" filter="url(#shadow1)"/>
  <text x="495" y="105" text-anchor="middle" font-size="12" font-weight="600" fill="#1565c0">Trade Execution</text>
  <text x="495" y="122" text-anchor="middle" font-size="10" fill="#42a5f5">Matching &amp; Fills</text>

  <!-- Arrow 3 -->
  <line x1="570" y1="110" x2="618" y2="110" stroke="#e65100" stroke-width="2" marker-end="url(#arrowOrange)"/>
  <defs><marker id="arrowOrange" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6" fill="#e65100"/></marker></defs>

  <!-- Trade Storage (ClickHouse) -->
  <rect x="620" y="76" width="170" height="68" rx="8" fill="#fff3e0" stroke="#e65100" stroke-width="1.5" filter="url(#shadow1)"/>
  <text x="705" y="100" text-anchor="middle" font-size="12" font-weight="700" fill="#e65100">ClickHouse</text>
  <text x="705" y="117" text-anchor="middle" font-size="10" fill="#bf360c">Trade Storage</text>
  <text x="705" y="133" text-anchor="middle" font-size="9" fill="#a1887f">Columnar / Time-Series</text>

  <!-- ===== EVENT QUEUE (middle) ===== -->
  <line x1="705" y1="144" x2="705" y2="188" stroke="#6a1b9a" stroke-width="2" marker-end="url(#arrowPurple)"/>
  <defs><marker id="arrowPurple" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6" fill="#6a1b9a"/></marker></defs>

  <!-- Event Queue box -->
  <rect x="610" y="190" width="190" height="50" rx="25" fill="#f3e5f5" stroke="#6a1b9a" stroke-width="1.5" filter="url(#shadow1)"/>
  <text x="705" y="212" text-anchor="middle" font-size="12" font-weight="700" fill="#6a1b9a">Kafka Event Queue</text>
  <text x="705" y="228" text-anchor="middle" font-size="9" fill="#9c27b0">Trade Events &amp; Notifications</text>

  <!-- ===== RISK SYSTEM (bottom) ===== -->
  <text x="60" y="280" font-size="11" font-weight="600" fill="#c62828" letter-spacing="1.5">RISK SYSTEM</text>

  <!-- Arrow from queue down-left to risk engine -->
  <path d="M610,215 L320,215 L320,298" stroke="#6a1b9a" stroke-width="2" fill="none" marker-end="url(#arrowPurple)"/>

  <!-- Risk Engine -->
  <rect x="230" y="300" width="180" height="80" rx="8" fill="#ffebee" stroke="#c62828" stroke-width="1.5" filter="url(#shadow1)"/>
  <text x="320" y="325" text-anchor="middle" font-size="12" font-weight="700" fill="#c62828">Risk Engine</text>
  <text x="320" y="342" text-anchor="middle" font-size="10" fill="#e53935">PnL | DV01 | Greeks</text>
  <text x="320" y="358" text-anchor="middle" font-size="10" fill="#e53935">VaR | Limits</text>
  <text x="320" y="372" text-anchor="middle" font-size="9" fill="#a1887f">Real-time Computation</text>

  <!-- Arrow from risk engine to risk storage -->
  <line x1="410" y1="340" x2="478" y2="340" stroke="#e65100" stroke-width="2" marker-end="url(#arrowOrange)"/>

  <!-- Risk Storage (ClickHouse) -->
  <rect x="480" y="300" width="170" height="80" rx="8" fill="#fff3e0" stroke="#e65100" stroke-width="1.5" filter="url(#shadow1)"/>
  <text x="565" y="325" text-anchor="middle" font-size="12" font-weight="700" fill="#e65100">ClickHouse</text>
  <text x="565" y="342" text-anchor="middle" font-size="10" fill="#bf360c">Risk Storage</text>
  <text x="565" y="358" text-anchor="middle" font-size="9" fill="#a1887f">Risk Numbers</text>
  <text x="565" y="372" text-anchor="middle" font-size="9" fill="#a1887f">Per Desk / Portfolio</text>

  <!-- Arrow from risk storage to dashboard -->
  <line x1="565" y1="380" x2="565" y2="408" stroke="#2e7d32" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <defs><marker id="arrowGreen" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6" fill="#2e7d32"/></marker></defs>

  <!-- Event notification arrow from queue to dashboard -->
  <path d="M800,215 L800,430 L730,430" stroke="#6a1b9a" stroke-width="1.5" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowPurple)"/>
  <text x="808" y="330" font-size="9" fill="#6a1b9a" transform="rotate(90,808,330)">event notify</text>

  <!-- ===== DASHBOARDS (bottom row) ===== -->
  <text x="60" y="420" font-size="11" font-weight="600" fill="#1565c0" letter-spacing="1.5">DASHBOARDS</text>

  <!-- FX Desk -->
  <rect x="30" y="435" width="140" height="65" rx="8" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1.5" filter="url(#shadow1)"/>
  <text x="100" y="458" text-anchor="middle" font-size="11" font-weight="600" fill="#2e7d32">FX Desk</text>
  <text x="100" y="473" text-anchor="middle" font-size="9" fill="#558b2f">PnL, DV01, Delta</text>
  <text x="100" y="487" text-anchor="middle" font-size="9" fill="#558b2f">Spot Positions</text>

  <!-- Rates Desk -->
  <rect x="190" y="435" width="140" height="65" rx="8" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1.5" filter="url(#shadow1)"/>
  <text x="260" y="458" text-anchor="middle" font-size="11" font-weight="600" fill="#2e7d32">Rates Desk</text>
  <text x="260" y="473" text-anchor="middle" font-size="9" fill="#558b2f">Duration, Convexity</text>
  <text x="260" y="487" text-anchor="middle" font-size="9" fill="#558b2f">DV01 Ladder</text>

  <!-- Options Desk -->
  <rect x="350" y="435" width="140" height="65" rx="8" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1.5" filter="url(#shadow1)"/>
  <text x="420" y="458" text-anchor="middle" font-size="11" font-weight="600" fill="#2e7d32">Options Desk</text>
  <text x="420" y="473" text-anchor="middle" font-size="9" fill="#558b2f">Greeks Panel</text>
  <text x="420" y="487" text-anchor="middle" font-size="9" fill="#558b2f">Vol Surface</text>

  <!-- React Dashboard -->
  <rect x="560" y="410" width="170" height="90" rx="8" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2" filter="url(#shadow1)"/>
  <text x="645" y="435" text-anchor="middle" font-size="12" font-weight="700" fill="#2e7d32">React Dashboard</text>
  <text x="645" y="452" text-anchor="middle" font-size="10" fill="#388e3c">WebSocket Updates</text>
  <text x="645" y="468" text-anchor="middle" font-size="9" fill="#558b2f">Per-Desk Views</text>
  <text x="645" y="483" text-anchor="middle" font-size="9" fill="#558b2f">Configurable Widgets</text>

  <!-- Connecting lines from desk boxes to main dashboard -->
  <line x1="170" y1="467" x2="190" y2="467" stroke="#2e7d32" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="330" y1="467" x2="350" y2="467" stroke="#2e7d32" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="490" y1="467" x2="560" y2="455" stroke="#2e7d32" stroke-width="1" stroke-dasharray="3,2"/>

  <!-- Legend -->
  <rect x="30" y="290" width="180" height="85" rx="6" fill="#ffffff" stroke="#d0d8e0" stroke-width="1" opacity="0.9"/>
  <text x="45" y="308" font-size="10" font-weight="600" fill="#1a3a5c">Asset Classes</text>
  <circle cx="50" cy="322" r="4" fill="#4a90d9"/><text x="60" y="326" font-size="9" fill="#555">FX — Spot, Forwards</text>
  <circle cx="50" cy="338" r="4" fill="#e65100"/><text x="60" y="342" font-size="9" fill="#555">Bonds — Govt, Corp</text>
  <circle cx="50" cy="354" r="4" fill="#2e7d32"/><text x="60" y="358" font-size="9" fill="#555">Equities — Stocks, ETFs</text>
  <circle cx="50" cy="370" r="4" fill="#6a1b9a"/><text x="60" y="374" font-size="9" fill="#555">Options &amp; Derivatives</text>
</svg>
