---
# Only the main SCSS file needs front matter
---

@import "minimal-mistakes/skins/{{ site.minimal_mistakes_skin | default: 'default' }}";
@import "minimal-mistakes";

/* ── Custom Masthead Layout ──────────────────────────── */
.masthead__layout {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  width: 100%;
  padding: 0.4rem 0;
}

.masthead__left {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  .site-title {
    font-size: 1em;
    font-weight: 700;
    white-space: nowrap;
  }
}

.masthead__center {
  text-align: center;
  .site-title {
    font-size: 1em;
    font-weight: 700;
  }
}

.site-author-name {
  font-size: 1.05em;
  font-weight: 600;
  letter-spacing: 0.04em;
  color: #333;
  white-space: nowrap;
}

.masthead__right {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  .greedy-nav {
    width: auto;
    a.site-title { display: none; } // hide duplicate title if any
  }
}

@media (max-width: 768px) {
  .masthead__layout {
    grid-template-columns: 1fr auto;
    grid-template-areas: "left right" "center center";
  }
  .masthead__left  { grid-area: left; }
  .masthead__right { grid-area: right; }
  .masthead__center {
    grid-area: center;
    padding: 0.2rem 0 0.3rem;
    border-top: 1px solid rgba(0,0,0,0.08);
  }
}

/* ── Avatar ─────────────────────────────────────────── */
.author__avatar {
  width: 150px !important;
  height: 150px !important;
  border-radius: 50% !important;
  overflow: hidden !important;
  border: 3px solid #5dade2 !important;
  display: block !important;
  margin: 0 auto 1em auto !important;
}
.author__avatar img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  border-radius: 0 !important;
  border: none !important;
  display: block !important;
}

/* ── Three-column home layout ────────────────────────── */
.home-grid {
  display: grid;
  grid-template-columns: 210px 1fr 190px;
  grid-template-areas: "left center right";
  gap: 2rem;
  align-items: start;
  padding: 1.5rem 0;
}
.home-grid__left  { grid-area: left; }
.home-grid__posts { grid-area: center; }
.home-grid__right { grid-area: right; }

@media (max-width: 1024px) {
  .home-grid {
    grid-template-columns: 1fr 180px;
    grid-template-areas: "center right" "left right";
  }
}
@media (max-width: 640px) {
  .home-grid {
    grid-template-columns: 1fr;
    grid-template-areas: "left" "center" "right";
  }
}

/* ── Word Map ────────────────────────────────────────── */
.wordmap {
  background: #f8f9fa;
  border: 1px solid #e3edf4;
  border-radius: 8px;
  padding: 1rem 1.1rem;
  position: sticky;
  top: 2rem;
}
.wordmap__title {
  font-size: 0.85em;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #555;
  margin: 0 0 0.8rem 0;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #add8e6;
}
.wordmap__cloud {
  display: flex;
  flex-wrap: wrap;
  gap: 0.35rem 0.45rem;
  align-items: baseline;
  line-height: 2;
}
.wm-1 { font-size: 1.55em; font-weight: 700; color: #1a5276; }
.wm-2 { font-size: 1.2em;  font-weight: 600; color: #1f618d; }
.wm-3 { font-size: 1.0em;  font-weight: 500; color: #2980b9; }
.wm-4 { font-size: 0.88em; font-weight: 400; color: #5dade2; }
.wm-5 { font-size: 0.78em; font-weight: 400; color: #85c1e9; }
.wm-1, .wm-2, .wm-3, .wm-4, .wm-5 {
  text-decoration: none;
  cursor: pointer;
  transition: color 0.15s;
  &:hover { text-decoration: underline; color: #1a3a4a; }
}

/* ── Tag Cloud ───────────────────────────────────────── */
.tagcloud {
  background: #f8f9fa;
  border: 1px solid #e3edf4;
  border-radius: 8px;
  padding: 1rem 1.1rem;
  position: sticky;
  top: 2rem;
}
.tagcloud__title {
  font-size: 0.85em;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #555;
  margin: 0 0 0.8rem 0;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #add8e6;
}
.tag-pill {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  margin: 3px 2px;
  padding: 3px 9px;
  background: #eaf4fb;
  border: 1px solid #add8e6;
  border-radius: 20px;
  font-size: 0.78em;
  color: #1f618d;
  text-decoration: none;
  transition: background 0.15s, color 0.15s;
  &:hover { background: #add8e6; color: #1a3a4a; text-decoration: none; }
}
.tag-pill__count {
  display: inline-block;
  background: #add8e6;
  color: #1a5276;
  border-radius: 10px;
  padding: 0 5px;
  font-size: 0.85em;
  font-weight: 600;
  line-height: 1.4;
}

/* ── Theme Switcher ──────────────────────────────────── */
#theme-switcher {
  display: inline-flex;
  align-items: center;
  background: rgba(255,255,255,0.15);
  border: 1px solid rgba(255,255,255,0.25);
  border-radius: 30px;
  padding: 3px;
  gap: 2px;
  margin-right: 1rem;
  vertical-align: middle;
  flex-shrink: 0;
}

.theme-btn {
  background: none;
  border: none;
  border-radius: 24px;
  width: 30px;
  height: 30px;
  cursor: pointer;
  font-size: 0.8em;
  color: rgba(255,255,255,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s, color 0.15s;
  &:hover { background: rgba(255,255,255,0.2); color: #fff; }
  &.active { background: rgba(255,255,255,0.9); color: #1a3a54; }
}

/* ── Dark Theme ──────────────────────────────────────── */
$dk-bg:           #0e1c2b;
$dk-surface:      #152636;
$dk-surface-alt:  #1b3048;
$dk-masthead:     #091520;
$dk-border:       #1e3d58;
$dk-text:         #ccd9e4;
$dk-muted:        #7a9ab4;
$dk-heading:      #e4f0f8;
$dk-link:         #5ab3d8;
$dk-link-hover:   #82ccea;
$dk-accent:       #2e7ab0;
$dk-code:         #071320;

[data-theme="dark"] {
  background-color: $dk-bg;
  color: $dk-text;

  body {
    background-color: $dk-bg;
    color: $dk-text;
  }

  // Masthead
  .masthead {
    background-color: $dk-masthead;
    border-bottom: 1px solid $dk-border;
    box-shadow: 0 2px 8px rgba(0,0,0,0.4);
    .site-title {
      color: $dk-link !important;
      &:hover { color: $dk-link-hover !important; }
    }
    .site-author-name { color: $dk-heading; }
    .greedy-nav {
      background-color: $dk-masthead;
      a {
        color: darken($dk-text, 5%);
        &:hover { color: $dk-link-hover; }
      }
      .visible-links a::before { background-color: $dk-link; }
      button { color: $dk-text; background: transparent; }
      .hidden-links {
        background-color: $dk-surface;
        border-color: $dk-border;
        a { color: $dk-text; &:hover { color: $dk-link-hover; } }
      }
    }
  }

  // Headings & body text
  h1, h2, h3, h4, h5, h6 { color: $dk-heading; }
  p, li                   { color: $dk-text; }
  a                       { color: $dk-link; &:hover { color: $dk-link-hover; } }
  hr                      { border-color: $dk-border; }
  strong                  { color: $dk-heading; }

  blockquote {
    color: $dk-muted;
    border-left: 4px solid $dk-accent;
    background: $dk-surface;
  }

  // Tables
  table {
    color: $dk-text;
    border-color: $dk-border;
    th { background-color: $dk-surface-alt; color: $dk-heading; border-color: $dk-border; }
    td { border-color: $dk-border; }
    tr:nth-child(even) { background-color: $dk-surface; }
  }

  // Code
  code {
    background-color: $dk-code;
    color: #7dd3f0;
    border: 1px solid $dk-border;
  }
  pre {
    background-color: $dk-code;
    border: 1px solid $dk-border;
    code { background: transparent; border: none; color: #7dd3f0; }
  }
  .highlight { background-color: $dk-code; }

  // Page / single post
  .page__content {
    color: $dk-text;
    h1, h2, h3, h4, h5, h6 { color: $dk-heading; }
    a { color: $dk-link; &:hover { color: $dk-link-hover; } }
    p, li { color: $dk-text; }
  }
  .page__title { color: $dk-heading; }
  .page__lead  { color: $dk-muted; }
  .page__meta  { color: $dk-muted; }
  .page__footer-copyright { color: $dk-muted; }

  // Archive (posts list)
  .archive {
    .archive__subtitle {
      color: $dk-heading;
      border-bottom: 2px solid $dk-border;
    }
    .archive__item-title a {
      color: $dk-link;
      &:hover { color: $dk-link-hover; }
    }
    .archive__item-excerpt { color: $dk-muted; }
    .page__meta             { color: darken($dk-muted, 10%); }
  }

  // Sidebar / author
  .sidebar {
    .author__name     { color: $dk-heading; }
    .author__bio      { color: $dk-muted; }
    .author__location { color: $dk-muted; font-size: 0.9em; }
    .author__urls a   { color: $dk-link; &:hover { color: $dk-link-hover; } }
    .author__urls-wrapper {
      background-color: $dk-surface;
      border: 1px solid $dk-border;
    }
    .btn--inverse {
      background-color: $dk-surface;
      color: $dk-text;
      border: 1px solid $dk-border;
      &:hover { background-color: $dk-surface-alt; color: $dk-heading; }
    }
  }

  // Navigation list (category/tag pages)
  .nav__list {
    background: $dk-surface;
    border: 1px solid $dk-border;
    border-radius: 6px;
    .nav__items a {
      color: $dk-text;
      &:hover { color: $dk-link-hover; }
      &.active { color: $dk-link; font-weight: 600; }
    }
    .nav__sub-title { color: $dk-muted; border-bottom-color: $dk-border; }
  }

  // Footer
  .page__footer {
    background-color: $dk-masthead;
    color: $dk-muted;
    border-top: 1px solid $dk-border;
    a { color: $dk-link; &:hover { color: $dk-link-hover; } }
  }

  // Word Map
  .wordmap {
    background: $dk-surface;
    border-color: $dk-border;
    .wordmap__title { color: $dk-muted; border-bottom-color: $dk-accent; }
    .wm-1 { color: #82ccea; }
    .wm-2 { color: #5ab3d8; }
    .wm-3 { color: #3e9bc0; }
    .wm-4 { color: #2e7ab0; }
    .wm-5 { color: #1e5a84; }
    .wm-1, .wm-2, .wm-3, .wm-4, .wm-5 {
      &:hover { color: $dk-heading; text-decoration: underline; }
    }
  }

  // Tag Cloud
  .tagcloud {
    background: $dk-surface;
    border-color: $dk-border;
    .tagcloud__title { color: $dk-muted; border-bottom-color: $dk-accent; }
  }
  .tag-pill {
    background: $dk-surface-alt;
    border-color: $dk-border;
    color: $dk-link;
    &:hover { background: $dk-accent; color: #fff; border-color: $dk-accent; text-decoration: none; }
    .tag-pill__count { background: $dk-border; color: $dk-text; }
  }

  // Theme switcher in dark masthead
  #theme-switcher {
    background: rgba(255,255,255,0.08);
    border-color: rgba(255,255,255,0.15);
  }
  .theme-btn {
    color: rgba(255,255,255,0.6);
    &:hover { background: rgba(255,255,255,0.15); color: #fff; }
    &.active { background: $dk-link; color: #fff; }
  }

  // Timeline nav blocks in personal posts
  div[style*="background:#f8f9fa"] {
    background: $dk-surface !important;
    border-left-color: $dk-accent !important;
    color: $dk-text !important;
    a { color: $dk-link !important; &:hover { color: $dk-link-hover !important; } }
    strong { color: $dk-heading !important; }
  }
}
